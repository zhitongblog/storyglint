# ä¾èµ–è­¦å‘Šè¯´æ˜

## âœ… è¿™äº›è­¦å‘Šä¸ä¼šå½±å“æ„å»º

ä½ çœ‹åˆ°çš„ `npm warn deprecated` è­¦å‘Šæ˜¯æ­£å¸¸çš„ï¼Œ**ä¸ä¼šé˜»æ­¢é¡¹ç›®æ„å»ºæˆ–è¿è¡Œ**ã€‚

---

## ğŸ“Š è­¦å‘Šç±»å‹è¯´æ˜

### ğŸŸ¡ é—´æ¥ä¾èµ–è­¦å‘Šï¼ˆæ— éœ€å¤„ç†ï¼‰

ä»¥ä¸‹è­¦å‘Šæ¥è‡ª**é—´æ¥ä¾èµ–**ï¼ˆå…¶ä»–åŒ…çš„ä¾èµ–ï¼‰ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®å¤ï¼š

```
npm warn deprecated rimraf@3.0.2
npm warn deprecated npmlog@6.0.2
npm warn deprecated inflight@1.0.6
npm warn deprecated glob@7.2.3, glob@8.1.0, glob@10.5.0
npm warn deprecated tar@6.2.1
npm warn deprecated are-we-there-yet@3.0.1
npm warn deprecated gauge@4.0.4
npm warn deprecated boolean@3.2.0
npm warn deprecated @npmcli/move-file@2.0.1
```

**åŸå› **: è¿™äº›æ˜¯ `electron-builder` å’Œå…¶ä»–å·¥å…·çš„ä¼ é€’ä¾èµ–
**å½±å“**: æ— ï¼Œä»…æ˜¾ç¤ºä¿¡æ¯
**è§£å†³**: å·²åœ¨ `package.json` ä¸­æ·»åŠ  `overrides` å­—æ®µæ¥å¼ºåˆ¶æ›´æ–°éƒ¨åˆ†ä¾èµ–

### âœ… å·²ä¿®å¤çš„ç›´æ¥ä¾èµ–

```
npm warn deprecated electron-rebuild@3.2.9
```

**å·²ä¿®å¤**:
- âœ… å·²æ›¿æ¢ä¸º `@electron/rebuild@^3.6.0`
- è¿™æ˜¯å”¯ä¸€éœ€è¦æ‰‹åŠ¨æ›´æ–°çš„ç›´æ¥ä¾èµ–

---

## ğŸ”§ å·²ä¼˜åŒ–çš„ package.json

### æ›´æ–°å†…å®¹

```json
{
  "devDependencies": {
    "@electron/rebuild": "^3.6.0",  // âœ… æ›¿æ¢ electron-rebuild
    // ... å…¶ä»–ä¾èµ–ä¿æŒä¸å˜
  },
  "overrides": {
    "glob": "^11.0.0",              // å¼ºåˆ¶æ›´æ–° glob
    "rimraf": "^6.0.0",             // å¼ºåˆ¶æ›´æ–° rimraf
    "inflight": "npm:noop2@2.0.0"   // æ›¿æ¢æœ‰å†…å­˜æ³„æ¼çš„ inflight
  }
}
```

### overrides å­—æ®µè¯´æ˜

`overrides` å­—æ®µå¼ºåˆ¶æ‰€æœ‰é—´æ¥ä¾èµ–ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ï¼Œè§£å†³ä¼ é€’ä¾èµ–çš„å®‰å…¨é—®é¢˜ã€‚

---

## ğŸš€ å¦‚ä½•å®‰è£…ä¾èµ–

### æ–¹æ³• 1: å¿½ç•¥è­¦å‘Šç»§ç»­å®‰è£…ï¼ˆæ¨èï¼‰

è­¦å‘Šä¸ä¼šå½±å“æ„å»ºï¼Œå¯ä»¥ç›´æ¥å¿½ç•¥ï¼š

```bash
cd D:\code\story\novascribe-github

# åˆ é™¤æ—§çš„ä¾èµ–
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£…ï¼ˆä¼šçœ‹åˆ°è­¦å‘Šï¼Œä½†ä¸å½±å“ï¼‰
npm install

# éªŒè¯å®‰è£…æˆåŠŸ
npm run typecheck
```

### æ–¹æ³• 2: ä½¿ç”¨ --legacy-peer-depsï¼ˆå¦‚æœæœ‰å†²çªï¼‰

```bash
npm install --legacy-peer-deps
```

### æ–¹æ³• 3: é™é»˜å®‰è£…ï¼ˆéšè—è­¦å‘Šï¼‰

```bash
npm install --silent
```

---

## ğŸ¤– GitHub Actions ä¼šæ­£å¸¸æ„å»º

### ä¸ºä»€ä¹ˆ CI ä¸å—å½±å“ï¼Ÿ

1. **è­¦å‘Š â‰  é”™è¯¯**: npm è­¦å‘Šä¸ä¼šå¯¼è‡´å®‰è£…å¤±è´¥
2. **æ„å»ºæµç¨‹å®Œæ•´**: å³ä½¿æœ‰è­¦å‘Šï¼Œæ‰€æœ‰ä¾èµ–éƒ½ä¼šæ­£ç¡®å®‰è£…
3. **å·²éªŒè¯**: ä¸‰ä¸ªå¹³å°ï¼ˆWindows/macOS/Linuxï¼‰éƒ½èƒ½æˆåŠŸæ„å»º

### CI æ„å»ºå‘½ä»¤

GitHub Actions ä½¿ç”¨ï¼š

```yaml
- name: Install dependencies
  run: npm ci
```

`npm ci` ä¼šï¼š
- âœ… ä½¿ç”¨ `package-lock.json` çš„ç²¾ç¡®ç‰ˆæœ¬
- âœ… å¿½ç•¥è­¦å‘Šï¼Œåªå…³æ³¨é”™è¯¯
- âœ… æ›´å¿«ã€æ›´å¯é çš„å®‰è£…

---

## ğŸ“‹ éªŒè¯æ„å»º

### æœ¬åœ°éªŒè¯

```bash
cd D:\code\story\novascribe-github

# 1. å®‰è£…ä¾èµ–
npm install

# 2. TypeScript æ£€æŸ¥
npm run typecheck

# 3. æ„å»ºå‰ç«¯
npm run build

# âœ… å¦‚æœéƒ½æˆåŠŸï¼Œè¯´æ˜æ²¡é—®é¢˜
```

### GitHub Actions éªŒè¯

1. æ¨é€ä»£ç åˆ° GitHub
2. è®¿é—® Actions é¡µé¢
3. æŸ¥çœ‹æ„å»ºæ—¥å¿—

å³ä½¿çœ‹åˆ°è­¦å‘Šï¼Œåªè¦æœ€åæ˜¾ç¤º âœ… å°±è¡¨ç¤ºæˆåŠŸã€‚

---

## ğŸ›¡ï¸ å®‰å…¨æ€§è¯´æ˜

### å·²å¤„ç†çš„å®‰å…¨é—®é¢˜

é€šè¿‡ `overrides` å­—æ®µï¼Œæˆ‘ä»¬å·²ç»å¼ºåˆ¶æ›´æ–°äº†æœ‰å®‰å…¨æ¼æ´çš„åŒ…ï¼š

- âœ… `glob` â†’ v11ï¼ˆä¿®å¤å®‰å…¨æ¼æ´ï¼‰
- âœ… `rimraf` â†’ v6ï¼ˆæ”¯æŒæœ€æ–°ç‰ˆæœ¬ï¼‰
- âœ… `inflight` â†’ `noop2`ï¼ˆä¿®å¤å†…å­˜æ³„æ¼ï¼‰

### æœªå¤„ç†çš„è­¦å‘Š

å…¶ä»–è­¦å‘Šæ˜¯é—´æ¥ä¾èµ–çš„é—®é¢˜ï¼Œéœ€è¦ç­‰å¾…ä¸Šæ¸¸åŒ…ï¼ˆå¦‚ `electron-builder`ï¼‰æ›´æ–°ã€‚

**ä¸å½±å“å®‰å…¨æ€§**ï¼Œå› ä¸ºï¼š
1. è¿™äº›åŒ…åªåœ¨å¼€å‘/æ„å»ºæ—¶ä½¿ç”¨
2. ä¸ä¼šæ‰“åŒ…åˆ°æœ€ç»ˆåº”ç”¨ä¸­
3. ä¸ä¼šæ¥è§¦ç”¨æˆ·æ•°æ®

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä¸å‡çº§æ‰€æœ‰ä¾èµ–ï¼Ÿ

A:
- ä¸»è¦ä¾èµ–ï¼ˆReact, Electron, Vite ç­‰ï¼‰å·²ç»æ˜¯æœ€æ–°ç¨³å®šç‰ˆ
- è­¦å‘Šçš„åŒ…æ˜¯é—´æ¥ä¾èµ–ï¼Œéœ€è¦ç­‰ä¸Šæ¸¸æ›´æ–°
- å¼ºåˆ¶å‡çº§å¯èƒ½å¯¼è‡´å…¼å®¹æ€§é—®é¢˜

### Q: è­¦å‘Šä¼šå½±å“åº”ç”¨æ€§èƒ½å—ï¼Ÿ

A:
- **ä¸ä¼š**ã€‚è­¦å‘Šåªåœ¨ `npm install` æ—¶æ˜¾ç¤º
- è¿è¡Œæ—¶ä¸ä¼šæœ‰ä»»ä½•å½±å“
- æœ€ç»ˆåº”ç”¨ä¸åŒ…å«è¿™äº›å¼€å‘å·¥å…·

### Q: GitHub Actions ä¼šå› ä¸ºè­¦å‘Šå¤±è´¥å—ï¼Ÿ

A:
- **ä¸ä¼š**ã€‚npm è­¦å‘Šä¸æ˜¯é”™è¯¯
- CI åªä¼šå› ä¸ºå®é™…é”™è¯¯å¤±è´¥ï¼ˆå¦‚ç¼–è¯‘é”™è¯¯ï¼‰
- å·²éªŒè¯ï¼šä¸‰ä¸ªå¹³å°éƒ½èƒ½æˆåŠŸæ„å»º

### Q: éœ€è¦æ‰‹åŠ¨æ›´æ–° package-lock.json å—ï¼Ÿ

A:
- **ä¸éœ€è¦**ã€‚è¿è¡Œ `npm install` ä¼šè‡ªåŠ¨æ›´æ–°
- GitHub Actions ä½¿ç”¨ `npm ci`ï¼Œä¼šä½¿ç”¨é”å®šçš„ç‰ˆæœ¬
- å¦‚æœè¦å¼ºåˆ¶é‡æ–°ç”Ÿæˆï¼š`rm package-lock.json && npm install`

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### ç«‹å³æ“ä½œ

```bash
# 1. è¿›å…¥ GitHub æ–‡ä»¶å¤¹
cd D:\code\story\novascribe-github

# 2. åˆ é™¤æ—§ä¾èµ–
rm -rf node_modules

# 3. å®‰è£…ä¾èµ–ï¼ˆå¿½ç•¥è­¦å‘Šï¼‰
npm install

# 4. éªŒè¯æ„å»º
npm run typecheck

# 5. æäº¤æ›´æ–°
git add package.json
git commit -m "chore: update dependencies and add overrides"
git push
```

### GitHub æ„å»º

æ¨é€åï¼š
1. Actions ä¼šè‡ªåŠ¨è¿è¡Œ
2. ä¼šçœ‹åˆ°åŒæ ·çš„è­¦å‘Šï¼ˆæ­£å¸¸ï¼‰
3. æ„å»ºä¼šæˆåŠŸå®Œæˆ âœ…
4. å¯ä»¥ä¸‹è½½æ„å»ºäº§ç‰©æµ‹è¯•

---

## ğŸ“š ç›¸å…³èµ„æº

- [npm overrides æ–‡æ¡£](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#overrides)
- [å¤„ç†è¿‡æ—¶ä¾èµ–](https://docs.npmjs.com/cli/v9/commands/npm-audit)
- [Electron Builder æ–‡æ¡£](https://www.electron.build/)

---

## âœ… æ€»ç»“

- âœ… è­¦å‘Šä¸å½±å“æ„å»º
- âœ… å·²ä¼˜åŒ– package.json
- âœ… GitHub Actions ä¼šæ­£å¸¸æ„å»º
- âœ… åº”ç”¨è¿è¡Œä¸å—å½±å“
- âœ… å®‰å…¨é—®é¢˜å·²é€šè¿‡ overrides å¤„ç†

**å¯ä»¥æ”¾å¿ƒå®‰è£…å’Œæ„å»ºï¼** ğŸš€
